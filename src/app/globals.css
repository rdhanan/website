@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply min-h-screen bg-background font-sans text-foreground antialiased selection:bg-blue-500 selection:text-neutral-50 dark:selection:bg-blue-700;
  }
  em {
    @apply font-italic text-[118%];
  }

  :root {
    --background: theme(colors.white);
    --foreground: theme(colors.zinc.700);

    --bold: theme(colors.zinc.800);
    --heading: theme(colors.zinc.800);

    --primary: hsl(209 100% 50%);

    /* both passed WCAG AA contrast test at minimum */
    /* https://coolors.co/contrast-checker */
    --muted-small-text: theme(colors.zinc.500);
    --muted-large-text: hsl(0 0% 58%);

    --border: hsl(0 0% 80%);
  }
  .dark {
    --background: hsl(0 0% 8%);
    --foreground: hsl(0 0% 85%);

    --bold: hsl(0 0% 95%);
    --heading: hsl(0 0% 90%);

    --primary: hsl(209 100% 50%);

    --muted-small-text: hsl(0, 0%, 50%);
    --muted-large-text: hsl(0, 0%, 39%);

    --border: hsl(0 0% 17%);
  }
}

@layer components {
  .container-main {
    @apply mx-auto max-w-screen-md px-3 duration-75 animate-in fade-in-60 sm:px-5;

    /* temp */
    @apply mb-[100vh];
  }
}

/* prose: custom styles for individual heading */

.prose :where(h2) {
  @apply before:mb-4 before:block before:h-[3px] before:w-[1.5rem] before:bg-foreground before:content-[''];

  @apply mt-[1.7em] font-serif text-3xl font-medium;
}

.prose :where(h3) {
  @apply mt-[1.3em] text-2xl font-medium;
}

/* rehype-autolink-headings */

.anchor {
  @apply -ml-[1em] pl-[1em] before:absolute before:-ml-[1em] before:font-sans before:text-white/0 before:content-['#'] hover:before:text-muted-large;

  /* discard prose <a> style */
  @apply font-inherit text-inherit no-underline;
}

/* remove margin applied by remark-gfm */

.contains-task-list {
  @apply list-none pl-0;
}

.task-list-item [type="checkbox"] {
  @apply my-0;
}

/* code block */

pre > code {
  @apply grid;
}

code {
  counter-reset: line;
}

code > [data-highlighted-line] {
  @apply bg-gray-700;
}

code > [data-line]::before {
  counter-increment: line;
  content: counter(line);

  /* Other styling */
  display: inline-block;
  width: 1rem;
  margin-right: 2rem;
  text-align: right;
  color: gray;
}

code[data-line-numbers-max-digits="2"] > [data-line]::before {
  width: 2rem;
}

code[data-line-numbers-max-digits="3"] > [data-line]::before {
  width: 3rem;
}
